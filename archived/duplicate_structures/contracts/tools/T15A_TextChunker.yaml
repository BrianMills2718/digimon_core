name: T15A_TextChunker
version: "1.0"
description: "Chunks text into semantically meaningful segments for processing"

input_contract:
  type: object
  properties:
    text:
      type: string
      minLength: 1
      description: "Text content to chunk"
    chunk_size:
      type: integer
      minimum: 100
      maximum: 2000
      default: 512
      description: "Target size for each chunk in characters"
    chunk_overlap:
      type: integer
      minimum: 0
      maximum: 500
      default: 50
      description: "Number of overlapping characters between chunks"
    chunking_strategy:
      type: string
      enum: ["fixed_size", "sentence_boundary", "paragraph_boundary", "semantic"]
      default: "sentence_boundary"
      description: "Strategy for creating chunks"
    metadata:
      type: object
      description: "Source document metadata to propagate"
  required:
    - text

output_contract:
  type: object
  properties:
    chunks:
      type: array
      minItems: 1
      items:
        type: object
        properties:
          chunk_id:
            type: string
            pattern: "^chunk_[0-9]+$"
          text:
            type: string
            minLength: 1
          start_position:
            type: integer
            minimum: 0
          end_position:
            type: integer
            minimum: 1
          chunk_index:
            type: integer
            minimum: 0
          metadata:
            type: object
            properties:
              source_page:
                type: integer
              overlap_with_previous:
                type: boolean
              overlap_with_next:
                type: boolean
        required:
          - chunk_id
          - text
          - start_position
          - end_position
          - chunk_index
    summary:
      type: object
      properties:
        total_chunks:
          type: integer
          minimum: 1
        avg_chunk_size:
          type: number
          minimum: 0
        chunking_strategy_used:
          type: string
      required:
        - total_chunks
        - avg_chunk_size
        - chunking_strategy_used
    execution_metadata:
      type: object
      properties:
        tool_name:
          type: string
          const: "T15A_TextChunker"
        execution_time:
          type: number
          minimum: 0
        input_length:
          type: integer
          minimum: 1
      required:
        - tool_name
        - execution_time
        - input_length
  required:
    - chunks
    - summary
    - execution_metadata