tool_id: "T34_EDGE_BUILDER"
name: "Edge Builder"
description: "Builds and persists relationship edges in Neo4j graph database"
version: "1.0.0"
category: "graph_building"

input_schema:
  type: object
  properties:
    relationships:
      type: array
      items:
        type: object
        properties:
          relationship_id:
            type: string
          relationship_type:
            type: string
          subject:
            type: object
            properties:
              text:
                type: string
              entity_type:
                type: string
              start:
                type: integer
              end:
                type: integer
          object:
            type: object
            properties:
              text:
                type: string
              entity_type:
                type: string
              start:
                type: integer
              end:
                type: integer
          confidence:
            type: number
            minimum: 0
            maximum: 1
          evidence_text:
            type: string
        required: ["relationship_id", "relationship_type", "subject", "object", "confidence"]
      minItems: 1
    source_refs:
      type: array
      items:
        type: string
      description: "References to source documents or chunks"
  required: ["relationships"]

output_schema:
  type: object
  properties:
    edges:
      type: array
      items:
        type: object
        properties:
          edge_id:
            type: string
          neo4j_id:
            type: string
          relationship_type:
            type: string
          source_entity_id:
            type: string
          target_entity_id:
            type: string
          weight:
            type: number
          confidence:
            type: number
        required: ["edge_id", "relationship_type", "source_entity_id", "target_entity_id"]
    edge_count:
      type: integer
      minimum: 0
    confidence:
      type: number
  required: ["edges", "edge_count"]

depends_on: ["T27_RELATIONSHIP_EXTRACTOR"]

dependencies:
  - "neo4j"
  - "provenance_service"

performance_requirements:
  max_execution_time: 20.0
  max_memory_mb: 400
  min_accuracy: 0.90

error_conditions:
  - "DATABASE_CONNECTION_ERROR"
  - "EDGE_BUILD_ERROR"
  - "MISSING_ENTITY_ERROR"
  - "INVALID_INPUT"