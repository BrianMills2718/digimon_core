tool_id: "T27_RELATIONSHIP_EXTRACTOR"
name: "Relationship Extractor"
description: "Extracts relationships between entities from text chunks using pattern matching"
version: "1.0.0"
category: "entity_extraction"

input_schema:
  type: object
  properties:
    chunk_ref:
      type: string
      description: "Reference to source text chunk"
    text:
      type: string
      minLength: 1
      description: "Text to analyze for relationships"
    entities:
      type: array
      items:
        type: object
        properties:
          text:
            type: string
          entity_type:
            type: string
          start:
            type: integer
          end:
            type: integer
          confidence:
            type: number
        required: ["text", "entity_type", "start", "end"]
      minItems: 2
      description: "List of entities found in this chunk"
    confidence:
      type: number
      minimum: 0
      maximum: 1
      default: 0.5
      description: "Minimum confidence threshold for relationships"
  required: ["chunk_ref", "text", "entities"]

output_schema:
  type: object
  properties:
    relationships:
      type: array
      items:
        type: object
        properties:
          relationship_id:
            type: string
          relationship_type:
            type: string
          subject:
            type: object
            properties:
              text:
                type: string
              entity_type:
                type: string
              start:
                type: integer
              end:
                type: integer
          object:
            type: object
            properties:
              text:
                type: string
              entity_type:
                type: string
              start:
                type: integer
              end:
                type: integer
          confidence:
            type: number
          evidence_text:
            type: string
          extraction_method:
            type: string
        required: ["relationship_id", "relationship_type", "subject", "object", "confidence"]
    total_relationships:
      type: integer
      minimum: 0
  required: ["relationships", "total_relationships"]

depends_on: ["T15A_TEXT_CHUNKER", "T23A_SPACY_NER"]

dependencies:
  - "spacy"
  - "provenance_service"

performance_requirements:
  max_execution_time: 15.0
  max_memory_mb: 300
  min_accuracy: 0.70

error_conditions:
  - "RELATIONSHIP_EXTRACTION_ERROR"
  - "INSUFFICIENT_ENTITIES"
  - "INVALID_ENTITY_DATA"
  - "INVALID_INPUT"